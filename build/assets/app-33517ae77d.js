!function(){"use strict";angular.module("app.core",["app.sortIndicator","ui.router","angular-loading-bar","ui.bootstrap"])}(),function(){"use strict";angular.module("app.core").constant("appConfig",{APP_NAME:"Frontend AngularJS Coding Demo",DEFAULT_PAGE:"home",DATA_API:{DEFAULT_METHOD:"GET",URL:"http://ergast.com/api"}})}(),function(){"use strict";function r(r,n){function e(){r.otherwise(n.DEFAULT_PAGE)}e()}r.$inject=["$urlRouterProvider","appConfig"],angular.module("app.core").config(r)}(),function(){"use strict";function r(r,n){function e(){r.document.title=n.APP_NAME}e()}r.$inject=["$window","appConfig"],angular.module("app.core").run(r)}(),function(){"use strict";function r(){var r={restrict:"E",replace:!0,transclude:!0,scope:{activeSort:"=",fieldName:"@"},controller:"sortIndicatorController as vm",templateUrl:"directives/sortIndicator/sortIndicator.html"};return r}function n(r){var n=this;n.activeSort=r.activeSort,n.fieldName=r.fieldName}n.$inject=["$scope"],angular.module("app.sortIndicator",[]).directive("sortIndicator",r).controller("sortIndicatorController",n)}(),function(){"use strict";function r(r,n,e,t){function a(){var e=t.DATA_API.URL+"/f1/driverstandings/1.json?offset=55&limit=11";return r({method:t.DATA_API.DEFAULT_METHOD,url:e,cache:!0}).then(function(r){return r.data.MRData},function(r){return n.reject("No valid API call to "+r.config.url)})}function o(e){var a=parseInt(e);return angular.isNumber(a)&&a>=1952&&a<=2015?r({method:t.DATA_API.DEFAULT_METHOD,url:t.DATA_API.URL+"/f1/"+a+"/results.json?limit=500",cache:!0}).then(function(r){return r.data.MRData},function(r){return n.reject("No valid API call to "+r.config.url)}):n.reject("No valid year specified: "+e)}var i={getSeasonWinners:a,getRacesBySeason:o};return i}r.$inject=["$http","$q","$log","appConfig"],angular.module("app.core").factory("dataService",r)}(),function(){"use strict";function r(){function r(r){return r.map(function(r){var n={};return n.season=parseInt(r.season),n.round=parseInt(r.round),n.driverId=r.DriverStandings[0].Driver.driverId,n.fullName=[r.DriverStandings[0].Driver.givenName,r.DriverStandings[0].Driver.familyName].join(" "),n.nationality=r.DriverStandings[0].Driver.nationality,n.constructorName=r.DriverStandings[0].Constructors[0].name,n})}function n(r,n){return r.map(function(r){var e={};return e.raceName=r.raceName,e.round=parseInt(r.round),e.circuitName=r.Circuit.circuitName,e.circuitLocation=[r.Circuit.Location.locality,r.Circuit.Location.country].join(", "),e.winner=[r.Results[0].Driver.givenName,r.Results[0].Driver.familyName].join(" "),e.isSeasonalWinner=n===r.Results[0].Driver.driverId,e})}var e={formatSeasonWinners:r,formatRacesBySeason:n};return e}angular.module("app.core").factory("formatService",r)}(),function(){"use strict";angular.module("app.home",["ui.router"])}(),function(){"use strict";function r(r){function n(){r.state("home",{url:"/home",templateUrl:"modules/home/home.html",controller:"home as vm"})}n()}r.$inject=["$stateProvider"],angular.module("app.home").config(r)}(),function(){"use strict";function r(r,n,e,t){function a(){s(),l.sort={field:"season",reverse:!1},l.filter={}}function o(r){l.sort.field=r,l.sort.reverse=!l.sort.reverse}function i(){return l.filter}function s(){r.debug("getting season winners"),e.getSeasonWinners().then(function(r){l.seasonWinners=t.formatSeasonWinners(r.StandingsTable.StandingsLists)},function(n){r.error(n)})}function c(a,o){l.selectedSeason=a,r.debug("getting Races from seasonYear "+a),e.getRacesBySeason(a).then(function(r){l.seasonRaces=t.formatRacesBySeason(r.RaceTable.Races,o),n.open({animation:!0,templateUrl:"/modules/modals/racesPerSeason.html",controller:"racesPerSeasonModalController",controllerAs:"vm",size:"lg",resolve:{seasonYear:function(){return a},seasonRaces:function(){return l.seasonRaces}}})},function(n){r.error(n)})}var l=this;l.getSeasonWinners=s,l.getRacesBySeason=c,l.orderBy=o,l.getFilter=i,a()}r.$inject=["$log","$uibModal","dataService","formatService"],angular.module("app.home").controller("home",r)}(),function(){"use strict";function r(r,n,e){function t(r){i.sort.field=r,i.sort.reverse=!i.sort.reverse}function a(){return i.filter}function o(){r.close()}var i=this;i.seasonYear=n,i.seasonRaces=e,i.orderBy=t,i.getFilter=a,i.close=o,i.sort={field:"round",reverse:!1},i.filter={}}r.$inject=["$uibModalInstance","seasonYear","seasonRaces"],angular.module("app.core").controller("racesPerSeasonModalController",r)}(),angular.module("app.core").run(["$templateCache",function(r){r.put("modules/home/home.html",'<div id="home" class="row">\r\n\r\n  <div class="col-sm-12">\r\n\r\n    <h1>Race results</h1>\r\n\r\n    <div class="panel panel-default">\r\n      <div class="panel-heading">\r\n        <h2>Seasonal winners F1 2005 &ndash; 2015</h2>\r\n      </div>\r\n      <div class="panel-body">\r\n\r\n        <div class="table-responsive" data-ng-if="vm.seasonWinners">\r\n\r\n          <table class="table">\r\n            <tr>\r\n              <th>\r\n                <span class="clickable" data-ng-click="vm.orderBy(\'season\',false)">\r\n                Season\r\n                <sort-indicator field-name="season" active-sort="vm.sort"></sort-indicator>\r\n              </span>\r\n\r\n                <div class="filter">\r\n                  <input class="form-control" type="text" ng-model="vm.filter[\'season\']" />\r\n                </div>\r\n              </th>\r\n              <th>\r\n                <span class="clickable" data-ng-click="vm.orderBy(\'round\',false)">\r\n                Round\r\n                <sort-indicator field-name="round" active-sort="vm.sort"></sort-indicator>\r\n              </span>\r\n                <div class="filter">\r\n                  <input class="form-control" type="text" ng-model="vm.filter[\'round\']" />\r\n                </div>\r\n              </th>\r\n              <th>\r\n                <span class="clickable" data-ng-click="vm.orderBy(\'fullName\',false)">\r\n                Champion\r\n                <sort-indicator field-name="fullName" active-sort="vm.sort"></sort-indicator>\r\n              </span>\r\n                <div class="filter">\r\n                  <input class="form-control" type="text" ng-model="vm.filter[\'fullName\']" />\r\n                </div>\r\n              </th>\r\n              <th>\r\n                <span class="clickable" data-ng-click="vm.orderBy(\'nationality\',false)">Nationality\r\n              <sort-indicator field-name="nationality" active-sort="vm.sort"></sort-indicator>\r\n            </span>\r\n                <div class="filter">\r\n                  <input class="form-control" type="text" ng-model="vm.filter[\'nationality\']" />\r\n                </div>\r\n              </th>\r\n              <th>\r\n                <span class="clickable" data-ng-click="vm.orderBy(\'constructorName\',false)">Constructor\r\n                  <sort-indicator field-name="constructorName" active-sort="vm.sort"></sort-indicator>\r\n                </span>\r\n                <div class="filter">\r\n                  <input class="form-control" type="text" ng-model="vm.filter[\'constructorName\']" />\r\n                </div>\r\n              </th>\r\n              <th>Details</th>\r\n            </tr>\r\n\r\n            <tr data-ng-repeat="season in vm.seasonWinners | orderBy: vm.sort.field : vm.sort.reverse | filter: vm.getFilter() ">\r\n              <td>{{season.season}}</td>\r\n              <td>{{season.round}}</td>\r\n              <td>{{season.fullName}}</td>\r\n              <td>{{season.nationality}}</td>\r\n              <td>{{season.constructorName}}</td>\r\n              <td><button class="btn btn-default btn-sm" title="View races for season {{season.season}}" data-ng-click="vm.getRacesBySeason(season.season, season.driverId);"><i  class="fa fa-flag-checkered" aria-hidden="true"></i> Race results</button></td>\r\n            </tr>\r\n\r\n          </table>\r\n\r\n        </div>\r\n\r\n        <div data-ng-if="!vm.seasonWinners">\r\n          <p><i class="fa fa-circle-o-notch fa-spin fa-fw"></i> Please wait while loading seasons 2005 &ndash; 2015&hellip;</p>\r\n        </div>\r\n\r\n      </div>\r\n      <div class="panel-footer">\r\n        <p data-ng-if="vm.seasonWinners">Click on the years to view indivual races. The seasonal champion is marked with a <i class="fa fa-trophy" aria-hidden="true"></i>          symbol.</p>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>'),r.put("modules/modals/racesPerSeason.html",'<div class="modal-header">\r\n<h3 class="modal-title" id="modal-title">Races per season {{vm.seasonYear}}</h3>\r\n</div>\r\n<div class="modal-body" id="modal-body">\r\n\r\n<div class="table-responsive">\r\n  <table class="table table-striped" ng-if="vm.seasonRaces">\r\n   <tr>\r\n    <th>\r\n      <span class="clickable" data-ng-click="vm.orderBy(\'round\',false)">\r\n        Race\r\n        <sort-indicator field-name="round" active-sort="vm.sort"></sort-indicator>\r\n      </span>\r\n      <div class="filter">\r\n        <input class="form-control" type="text" ng-model="vm.filter[\'round\']" />\r\n      </div>\r\n    </th>\r\n    <th>\r\n      <span class="clickable" data-ng-click="vm.orderBy(\'raceName\',false)">\r\n        Name\r\n        <sort-indicator field-name="raceName" active-sort="vm.sort"></sort-indicator>\r\n      </span>\r\n      <div class="filter">\r\n        <input class="form-control" type="text" ng-model="vm.filter[\'raceName\']" />\r\n      </div>\r\n    </th>\r\n    <th>\r\n      <span class="clickable" data-ng-click="vm.orderBy(\'circuitName\',false)">\r\n        Circuit\r\n        <sort-indicator field-name="circuitName" active-sort="vm.sort"></sort-indicator>\r\n      </span>\r\n      <div class="filter">\r\n        <input class="form-control" type="text" ng-model="vm.filter[\'circuitName\']" />\r\n      </div>\r\n    </th>\r\n    <th>\r\n      <span class="clickable" data-ng-click="vm.orderBy(\'circuitLocation\',false)">\r\n        Location\r\n        <sort-indicator field-name="circuitLocation" active-sort="vm.sort"></sort-indicator>\r\n      </span>\r\n      <div class="filter">\r\n        <input class="form-control" type="text" ng-model="vm.filter[\'circuitLocation\']" />\r\n      </div>\r\n\r\n    </th>\r\n    <th>\r\n      <span class="clickable" data-ng-click="vm.orderBy(\'winner\',false)">\r\n        Winner\r\n        <sort-indicator field-name="winner" active-sort="vm.sort"></sort-indicator>\r\n      </span>\r\n      <div class="filter">\r\n        <input class="form-control" type="text" ng-model="vm.filter[\'winner\']" />\r\n      </div>\r\n    </th>\r\n   </tr>\r\n\r\n   <tr data-ng-repeat="races in vm.seasonRaces | orderBy: vm.sort.field : vm.sort.reverse | filter: vm.getFilter() " data-ng-class="{ \'seasonalWinner\': races.isSeasonalWinner }">\r\n    <td>{{races.round}}</td>\r\n    <td>{{races.raceName}}</td>\r\n    <td>{{races.circuitName}}</td>\r\n    <td>{{races.circuitLocation}}</td>\r\n    <td>{{races.winner}} <i data-ng-if="races.isSeasonalWinner" class="fa fa-trophy" aria-hidden="true"></i></td>\r\n   </tr>\r\n\r\n  </table>\r\n</div>\r\n\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn btn-primary" type="button" ng-click="vm.close()">Close</button>\r\n</div>\r\n'),r.put("directives/sortIndicator/sortIndicator.html",'  \r\n<span>\r\n    <i class="fa" aria-hidden="true" \r\n        data-ng-if="activeSort.field === vm.fieldName" \r\n        data-ng-class="activeSort.reverse ? \'fa-sort-desc\' : \'fa-sort-asc\'">\r\n    </i>\r\n<span>\r\n')}]),function(){"use strict";angular.module("app",["app.core","app.home"])}();